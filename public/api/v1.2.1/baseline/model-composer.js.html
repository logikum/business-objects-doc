<!doctype html>
<html>

<head>
  <meta name="generator" content="JSDoc 3.4.0">
  <meta charset="utf-8">
  <title>Source: model-composer.js</title>
  <link rel="stylesheet" href="https://brick.a.ssl.fastly.net/Karla:400,400i,700,700i" type="text/css">
  <link rel="stylesheet" href="https://brick.a.ssl.fastly.net/Noto+Serif:400,400i,700,700i" type="text/css">
  <link rel="stylesheet" href="https://brick.a.ssl.fastly.net/Inconsolata:500" type="text/css">
  <link href="css/baseline.css" rel="stylesheet">
</head>

<body onload="prettyPrint()">
  <nav id="jsdoc-navbar" role="navigation" class="jsdoc-navbar">
    <div id="jsdoc-navbar-container">
      <div id="jsdoc-navbar-content">
        <a href="index.html" class="jsdoc-navbar-package-name">Home</a>
      </div>
    </div>
  </nav>
  <div id="jsdoc-body-container">
    <div id="jsdoc-content">
      <div id="jsdoc-content-container">
        <div id="jsdoc-banner" role="banner">
        </div>
        <div id="jsdoc-main" role="main">
          <header class="page-header">
            <h1>Source: model-composer.js</h1>
          </header>
          <article>
            <pre class="prettyprint linenums"><code>&#x27;use strict&#x27;;

//region Imports

var EditableRootObject &#x3D; require(&#x27;./editable-root-object.js&#x27;);
var EditableChildObject &#x3D; require(&#x27;./editable-child-object.js&#x27;);
var EditableRootCollection &#x3D; require(&#x27;./editable-root-collection.js&#x27;);
var EditableChildCollection &#x3D; require(&#x27;./editable-child-collection.js&#x27;);
var ReadOnlyRootObject &#x3D; require(&#x27;./read-only-root-object.js&#x27;);
var ReadOnlyChildObject &#x3D; require(&#x27;./read-only-child-object.js&#x27;);
var ReadOnlyRootCollection &#x3D; require(&#x27;./read-only-root-collection.js&#x27;);
var ReadOnlyChildCollection &#x3D; require(&#x27;./read-only-child-collection.js&#x27;);
var CommandObject &#x3D; require(&#x27;./command-object.js&#x27;);

var PropertyManager &#x3D; require(&#x27;./shared/property-manager.js&#x27;);
var RuleManager &#x3D; require(&#x27;./rules/rule-manager.js&#x27;);
var ExtensionManager &#x3D; require(&#x27;./shared/extension-manager.js&#x27;);

var Action &#x3D; require(&#x27;./rules/authorization-action.js&#x27;);
var cr &#x3D; require(&#x27;./common-rules/index.js&#x27;);

var PropertyInfo &#x3D; require(&#x27;./shared/property-info.js&#x27;);
var dt &#x3D; require(&#x27;./data-types/index.js&#x27;);

var ComposerError &#x3D; require(&#x27;./system/composer-error.js&#x27;);

//endregion

/**
 * Factory method to create a model composer for asynchronous business objects.
 *
 * @function bo.ModelComposer
 * @param {string} modelName - The name of the model.
 * @returns {ModelComposer} The model composer.
 */
function ModelComposerFactory (modelName) {
  return new ModelComposer (modelName);
}

var ArgsType &#x3D; {
  businessObject: 0,
  rootCollection: 1,
  childCollection: 2
};

/**
 * @classdesc
 *    Represents a model composer to build asynchronous business objects.
 * @description
 *    Creates a new asynchronous model composer instance.
 *
 * @name ModelComposer
 * @constructor
 * @param {string} modelName - The name of the model to build.
 */
function ModelComposer (modelName) {

  //region Variables

  var self &#x3D; this;

  var modelFactory &#x3D; null;
  var modelTypeName &#x3D; null;
  var memberType &#x3D; null;
  var argsType &#x3D; null;
  var isCollection &#x3D; null;
  var isRoot &#x3D; null;
  var isEditable &#x3D; null;

  var properties &#x3D; null;
  var rules &#x3D; null;
  var extensions &#x3D; null;
  var currentProperty &#x3D; null;

  //endregion

  //region Model types

  /**
   * Sets the type of the business object as editable root object.
   *
   * @function ModelComposer#editableRootObject
   * @param {string} dataSource - The identifier of the data source.
   * @param {string} modelPath - The path of the model definition.
   * @returns {ModelComposer} The model composer.
   */
  this.editableRootObject &#x3D; function (dataSource, modelPath) {
    modelFactory &#x3D; EditableRootObject;
    modelTypeName &#x3D; &#x27;EditableRootObject&#x27;;
    argsType &#x3D; ArgsType.businessObject;
    isCollection &#x3D; false;
    isRoot &#x3D; true;
    isEditable &#x3D; true;
    return initialize(dataSource, modelPath);
  };

  /**
   * Sets the type of the business object as editable child object.
   *
   * @function ModelComposer#editableChildObject
   * @param {string} dataSource - The identifier of the data source.
   * @param {string} modelPath - The path of the model definition.
   * @returns {ModelComposer} The model composer.
   */
  this.editableChildObject &#x3D; function (dataSource, modelPath) {
    modelFactory &#x3D; EditableChildObject;
    modelTypeName &#x3D; &#x27;EditableChildObject&#x27;;
    argsType &#x3D; ArgsType.businessObject;
    isCollection &#x3D; false;
    isRoot &#x3D; false;
    isEditable &#x3D; true;
    return initialize(dataSource, modelPath);
  };

  /**
   * Sets the type of the business object as read-only root object.
   *
   * @function ModelComposer#readOnlyRootObject
   * @param {string} dataSource - The identifier of the data source.
   * @param {string} modelPath - The path of the model definition.
   * @returns {ModelComposer} The model composer.
   */
  this.readOnlyRootObject &#x3D; function (dataSource, modelPath) {
    modelFactory &#x3D; ReadOnlyRootObject;
    modelTypeName &#x3D; &#x27;ReadOnlyRootObject&#x27;;
    argsType &#x3D; ArgsType.businessObject;
    isCollection &#x3D; false;
    isRoot &#x3D; true;
    isEditable &#x3D; false;
    return initialize(dataSource, modelPath);
  };

  /**
   * Sets the type of the business object as read-only child object.
   *
   * @function ModelComposer#readOnlyChildObject
   * @param {string} dataSource - The identifier of the data source.
   * @param {string} modelPath - The path of the model definition.
   * @returns {ModelComposer} The model composer.
   */
  this.readOnlyChildObject &#x3D; function (dataSource, modelPath) {
    modelFactory &#x3D; ReadOnlyChildObject;
    modelTypeName &#x3D; &#x27;ReadOnlyChildObject&#x27;;
    argsType &#x3D; ArgsType.businessObject;
    isCollection &#x3D; false;
    isRoot &#x3D; false;
    isEditable &#x3D; false;
    return initialize(dataSource, modelPath);
  };

  /**
   * Sets the type of the business object as editable root collection.
   *
   * @function ModelComposer#editableRootCollection
   * @param {string} dataSource - The identifier of the data source.
   * @param {string} modelPath - The path of the model definition.
   * @returns {ModelComposer} The model composer.
   */
  this.editableRootCollection &#x3D; function (dataSource, modelPath) {
    modelFactory &#x3D; EditableRootCollection;
    modelTypeName &#x3D; &#x27;EditableRootCollection&#x27;;
    argsType &#x3D; ArgsType.rootCollection;
    isCollection &#x3D; true;
    isRoot &#x3D; true;
    isEditable &#x3D; true;
    return initialize(dataSource, modelPath);
  };

  /**
   * Sets the type of the business object as editable child collection.
   *
   * @function ModelComposer#editableChildCollection
   * @returns {ModelComposer} The model composer.
   */
  this.editableChildCollection &#x3D; function () {
    modelFactory &#x3D; EditableChildCollection;
    modelTypeName &#x3D; &#x27;EditableChildCollection&#x27;;
    argsType &#x3D; ArgsType.childCollection;
    isCollection &#x3D; true;
    isRoot &#x3D; false;
    isEditable &#x3D; true;
    return initialize();
  };

  /**
   * Sets the type of the business object as read-only root collection.
   *
   * @function ModelComposer#readOnlyRootCollection
   * @param {string} dataSource - The identifier of the data source.
   * @param {string} modelPath - The path of the model definition.
   * @returns {ModelComposer} The model composer.
   */
  this.readOnlyRootCollection &#x3D; function (dataSource, modelPath) {
    modelFactory &#x3D; ReadOnlyRootCollection;
    modelTypeName &#x3D; &#x27;ReadOnlyRootCollection&#x27;;
    argsType &#x3D; ArgsType.rootCollection;
    isCollection &#x3D; true;
    isRoot &#x3D; true;
    isEditable &#x3D; false;
    return initialize(dataSource, modelPath);
  };

  /**
   * Sets the type of the business object as read-only child collection.
   *
   * @function ModelComposer#readOnlyChildCollection
   * @returns {ModelComposer} The model composer.
   */
  this.readOnlyChildCollection &#x3D; function () {
    modelFactory &#x3D; ReadOnlyChildCollection;
    modelTypeName &#x3D; &#x27;ReadOnlyChildCollection&#x27;;
    argsType &#x3D; ArgsType.childCollection;
    isCollection &#x3D; true;
    isRoot &#x3D; false;
    isEditable &#x3D; false;
    return initialize();
  };

  /**
   * Sets the type of the business object as command object.
   *
   * @function ModelComposer#commandObject
   * @param {string} dataSource - The identifier of the data source.
   * @param {string} modelPath - The path of the model definition.
   * @returns {ModelComposer} The model composer.
   */
  this.commandObject &#x3D; function (dataSource, modelPath) {
    modelFactory &#x3D; CommandObject;
    modelTypeName &#x3D; &#x27;CommandObject&#x27;;
    argsType &#x3D; ArgsType.businessObject;
    isCollection &#x3D; false;
    isRoot &#x3D; true;
    isEditable &#x3D; true;
    return initialize(dataSource, modelPath);
  };

  function initialize (dataSource, modelPath) {
    if (argsType &#x3D;&#x3D;&#x3D; ArgsType.businessObject)
      properties &#x3D; new PropertyManager();
    if (argsType !&#x3D;&#x3D; ArgsType.childCollection) {
      rules &#x3D; new RuleManager();
      extensions &#x3D; new ExtensionManager(dataSource, modelPath);
    }
    return self;
  }

  //endregion

  //region Collections

  /**
   * Defines the model type of the elements in a collection.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootCollection}
   *      * {@link EditableChildCollection}
   *      * {@link ReadOnlyRootCollection}
   *      * {@link ReadOnlyChildCollection}
   *
   * @function ModelComposer#itemType
   * @param {function} itemType - The model type of the collection elements.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.itemType &#x3D; function (itemType) {
    if (!isCollection)
      invalid(&#x27;itemType&#x27;);
    memberType &#x3D; itemType;
    return this;
  };

  //endregion

  //region Properties

  /**
   * Defines a Boolean property for the business object.
   * See {@link bo.dataTypes.Boolean Boolean} data type.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject}
   *      * {@link ReadOnlyChildObject}
   *      * {@link CommandObject}
   *
   * @function ModelComposer#boolean
   * @param {string} propertyName - The name of the property.
   * @param {bo.shared.PropertyFlag} [flags] - Other attributes of the property.
   * @param {external.propertyGetter} [getter] - Custom function to read the value of the property.
   * @param {external.propertySetter} [setter] - Custom function to write the value of the property.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.boolean &#x3D; function (propertyName, flags, getter, setter) {
    if (isCollection)
      invalid(&#x27;boolean&#x27;);
    return addProperty(propertyName, dt.Boolean, flags, getter, setter);
  };

  /**
   * Defines a text property for the business object.
   * See {@link bo.dataTypes.Text text} data type.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject}
   *      * {@link ReadOnlyChildObject}
   *      * {@link CommandObject}
   *
   * @function ModelComposer#text
   * @param {string} propertyName - The name of the property.
   * @param {bo.shared.PropertyFlag} [flags] - Other attributes of the property.
   * @param {external.propertyGetter} [getter] - Custom function to read the value of the property.
   * @param {external.propertySetter} [setter] - Custom function to write the value of the property.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.text &#x3D; function (propertyName, flags, getter, setter) {
    if (isCollection)
      invalid(&#x27;text&#x27;);
    return addProperty(propertyName, dt.Text, flags, getter, setter);
  };

  /**
   * Defines an e-mail address property for the business object.
   * See {@link bo.dataTypes.Email e-mail} data type.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject}
   *      * {@link ReadOnlyChildObject}
   *      * {@link CommandObject}
   *
   * @function ModelComposer#email
   * @param {string} propertyName - The name of the property.
   * @param {bo.shared.PropertyFlag} [flags] - Other attributes of the property.
   * @param {external.propertyGetter} [getter] - Custom function to read the value of the property.
   * @param {external.propertySetter} [setter] - Custom function to write the value of the property.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.email &#x3D; function (propertyName, flags, getter, setter) {
    if (isCollection)
      invalid(&#x27;email&#x27;);
    return addProperty(propertyName, dt.Email, flags, getter, setter);
  };

  /**
   * Defines an integer property for the business object.
   * See {@link bo.dataTypes.Integer integer} data type.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject}
   *      * {@link ReadOnlyChildObject}
   *      * {@link CommandObject}
   *
   * @function ModelComposer#integer
   * @param {string} propertyName - The name of the property.
   * @param {bo.shared.PropertyFlag} [flags] - Other attributes of the property.
   * @param {external.propertyGetter} [getter] - Custom function to read the value of the property.
   * @param {external.propertySetter} [setter] - Custom function to write the value of the property.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.integer &#x3D; function (propertyName, flags, getter, setter) {
    if (isCollection)
      invalid(&#x27;integer&#x27;);
    return addProperty(propertyName, dt.Integer, flags, getter, setter);
  };

  /**
   * Defines a decimal property for the business object.
   * See {@link bo.dataTypes.Decimal decimal} data type.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject}
   *      * {@link ReadOnlyChildObject}
   *      * {@link CommandObject}
   *
   * @function ModelComposer#decimal
   * @param {string} propertyName - The name of the property.
   * @param {bo.shared.PropertyFlag} [flags] - Other attributes of the property.
   * @param {external.propertyGetter} [getter] - Custom function to read the value of the property.
   * @param {external.propertySetter} [setter] - Custom function to write the value of the property.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.decimal &#x3D; function (propertyName, flags, getter, setter) {
    if (isCollection)
      invalid(&#x27;decimal&#x27;);
    return addProperty(propertyName, dt.Decimal, flags, getter, setter);
  };

  /**
   * Defines an enumeration property for the business object.
   * See {@link bo.dataTypes.Enum enumeration} data type.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject}
   *      * {@link ReadOnlyChildObject}
   *      * {@link CommandObject}
   *
   * @function ModelComposer#enum
   * @param {string} propertyName - The name of the property.
   * @param {bo.shared.PropertyFlag} [flags] - Other attributes of the property.
   * @param {external.propertyGetter} [getter] - Custom function to read the value of the property.
   * @param {external.propertySetter} [setter] - Custom function to write the value of the property.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.enum &#x3D; function (propertyName, flags, getter, setter) {
    if (isCollection)
      invalid(&#x27;enum&#x27;);
    return addProperty(propertyName, dt.Enum, flags, getter, setter);
  };

  /**
   * Defines a date-time property for the business object.
   * See {@link bo.dataTypes.DateTime date-time} data type.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject}
   *      * {@link ReadOnlyChildObject}
   *      * {@link CommandObject}
   *
   * @function ModelComposer#dateTime
   * @param {string} propertyName - The name of the property.
   * @param {bo.shared.PropertyFlag} [flags] - Other attributes of the property.
   * @param {external.propertyGetter} [getter] - Custom function to read the value of the property.
   * @param {external.propertySetter} [setter] - Custom function to write the value of the property.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.dateTime &#x3D; function (propertyName, flags, getter, setter) {
    if (isCollection)
      invalid(&#x27;dateTime&#x27;);
    return addProperty(propertyName, dt.DateTime, flags, getter, setter);
  };

  /**
   * Defines a general property for the business object.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject}
   *      * {@link ReadOnlyChildObject}
   *      * {@link CommandObject}
   *
   * @function ModelComposer#property
   * @param {string} propertyName - The name of the property.
   * @param {function} typeCtor - The data type of the property.
   * @param {bo.shared.PropertyFlag} [flags] - Other attributes of the property.
   * @param {external.propertyGetter} [getter] - Custom function to read the value of the property.
   * @param {external.propertySetter} [setter] - Custom function to write the value of the property.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.property &#x3D; function (propertyName, typeCtor, flags, getter, setter) {
    if (isCollection)
      invalid(&#x27;property&#x27;);
    return addProperty(propertyName, typeCtor, flags, getter, setter);
  };

  function addProperty (propertyName, propertyType, flags, getter, setter) {
    var property &#x3D; new PropertyInfo(propertyName, propertyType, flags, getter, setter);
    properties.add(property);
    currentProperty &#x3D; property;
    return self;
  }

  //endregion

  //region Property rules - validation

  /**
   * Adds a required rule to the current property.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject} - allowed but rarely used
   *      * {@link ReadOnlyChildObject} - allowed but rarely used
   *      * {@link CommandObject}
   *
   * @function ModelComposer#required
   * @param {string} message - Human-readable description of the rule failure.
   * @param {number} [priority&#x3D;50] - The priority of the rule.
   * @param {boolean} [stopsProcessing&#x3D;false] - Indicates the rule behavior in case of failure.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   * @throws {@link bo.system.ComposerError Composer error}: The current property is undefinable.
   */
  this.required &#x3D; function (/* message, priority, stopsProcessing */) {
    if (isCollection)
      invalid(&#x27;required&#x27;);
    checkCurrentProperty(&#x27;required&#x27;);
    return addValRule(cr.required, arguments);
  };

  /**
   * Adds a maximum length rule to the current property.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject} - allowed but rarely used
   *      * {@link ReadOnlyChildObject} - allowed but rarely used
   *      * {@link CommandObject}
   *
   * @function ModelComposer#maxLength
   * @param {number} maxLength - The maximum length of the property value.
   * @param {string} message - Human-readable description of the rule failure.
   * @param {number} [priority&#x3D;10] - The priority of the rule.
   * @param {boolean} [stopsProcessing&#x3D;false] - Indicates the rule behavior in case of failure.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   * @throws {@link bo.system.ComposerError Composer error}: The current property is undefinable.
   */
  this.maxLength &#x3D; function (/* maxLength, message, priority, stopsProcessing */) {
    if (isCollection)
      invalid(&#x27;maxLength&#x27;);
    checkCurrentProperty(&#x27;maxLength&#x27;);
    return addValRule(cr.maxLength, arguments);
  };

  /**
   * Adds a minimum length rule to the current property.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject} - allowed but rarely used
   *      * {@link ReadOnlyChildObject} - allowed but rarely used
   *      * {@link CommandObject}
   *
   * @function ModelComposer#minLength
   * @param {number} minLength - The minimum length of the property value.
   * @param {string} message - Human-readable description of the rule failure.
   * @param {number} [priority&#x3D;10] - The priority of the rule.
   * @param {boolean} [stopsProcessing&#x3D;false] - Indicates the rule behavior in case of failure.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   * @throws {@link bo.system.ComposerError Composer error}: The current property is undefinable.
   */
  this.minLength &#x3D; function (/* minLength, message, priority, stopsProcessing */) {
    if (isCollection)
      invalid(&#x27;minLength&#x27;);
    checkCurrentProperty(&#x27;minLength&#x27;);
    return addValRule(cr.minLength, arguments);
  };

  /**
   * Adds a required length rule to the current property.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject} - allowed but rarely used
   *      * {@link ReadOnlyChildObject} - allowed but rarely used
   *      * {@link CommandObject}
   *
   * @function ModelComposer#lengthIs
   * @param {number} length - The required length of the property value.
   * @param {string} message - Human-readable description of the rule failure.
   * @param {number} [priority&#x3D;10] - The priority of the rule.
   * @param {boolean} [stopsProcessing&#x3D;false] - Indicates the rule behavior in case of failure.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   * @throws {@link bo.system.ComposerError Composer error}: The current property is undefinable.
   */
  this.lengthIs &#x3D; function (/* length, message, priority, stopsProcessing */) {
    if (isCollection)
      invalid(&#x27;lengthIs&#x27;);
    checkCurrentProperty(&#x27;lengthIs&#x27;);
    return addValRule(cr.lengthIs, arguments);
  };

  /**
   * Adds a maximum value rule to the current property.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject} - allowed but rarely used
   *      * {@link ReadOnlyChildObject} - allowed but rarely used
   *      * {@link CommandObject}
   *
   * @function ModelComposer#maxValue
   * @param {number} maxValue - The maximum value of the property value.
   * @param {string} message - Human-readable description of the rule failure.
   * @param {number} [priority&#x3D;10] - The priority of the rule.
   * @param {boolean} [stopsProcessing&#x3D;false] - Indicates the rule behavior in case of failure.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   * @throws {@link bo.system.ComposerError Composer error}: The current property is undefinable.
   */
  this.maxValue &#x3D; function (/* maxValue, message, priority, stopsProcessing */) {
    if (isCollection)
      invalid(&#x27;maxValue&#x27;);
    checkCurrentProperty(&#x27;maxValue&#x27;);
    return addValRule(cr.maxValue, arguments);
  };

  /**
   * Adds a minimum value rule to the current property.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject} - allowed but rarely used
   *      * {@link ReadOnlyChildObject} - allowed but rarely used
   *      * {@link CommandObject}
   *
   * @function ModelComposer#minValue
   * @param {number} minValue - The minimum value of the property value.
   * @param {string} message - Human-readable description of the rule failure.
   * @param {number} [priority&#x3D;10] - The priority of the rule.
   * @param {boolean} [stopsProcessing&#x3D;false] - Indicates the rule behavior in case of failure.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   * @throws {@link bo.system.ComposerError Composer error}: The current property is undefinable.
   */
  this.minValue &#x3D; function (/* minValue, message, priority, stopsProcessing */) {
    if (isCollection)
      invalid(&#x27;minValue&#x27;);
    checkCurrentProperty(&#x27;minValue&#x27;);
    return addValRule(cr.minValue, arguments);
  };

  /**
   * Adds an expression rule to the current property.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject} - allowed but rarely used
   *      * {@link ReadOnlyChildObject} - allowed but rarely used
   *      * {@link CommandObject}
   *
   * @function ModelComposer#expression
   * @param {regexp} regex - The regular expression that specifies the rule.
   * @param {bo.commonRules.NullResultOption} option - The action to execute when the value is null.
   * @param {string} message - Human-readable description of the rule failure.
   * @param {number} [priority&#x3D;10] - The priority of the rule.
   * @param {boolean} [stopsProcessing&#x3D;false] - Indicates the rule behavior in case of failure.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   * @throws {@link bo.system.ComposerError Composer error}: The current property is undefinable.
   */
  this.expression &#x3D; function (/* regex, option, message, priority, stopsProcessing */) {
    if (isCollection)
      invalid(&#x27;expression&#x27;);
    checkCurrentProperty(&#x27;expression&#x27;);
    return addValRule(cr.expression, arguments);
  };

  /**
   * Adds a dependency rule to the current property.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject} - allowed but rarely used
   *      * {@link ReadOnlyChildObject} - allowed but rarely used
   *      * {@link CommandObject}
   *
   * @function ModelComposer#dependency
   * @param {(bo.shared.PropertyInfo|Array.&amp;lt;bo.shared.PropertyInfo&gt;)} dependencies -
   *    A single dependent property or an array of them.
   * @param {string} message - Human-readable description of the rule failure.
   * @param {number} [priority&#x3D;-100] - The priority of the rule.
   * @param {boolean} [stopsProcessing&#x3D;false] - Indicates the rule behavior in case of failure.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   * @throws {@link bo.system.ComposerError Composer error}: The current property is undefinable.
   */
  this.dependency &#x3D; function (/* dependencies, message, priority, stopsProcessing */) {
    if (isCollection)
      invalid(&#x27;dependency&#x27;);
    checkCurrentProperty(&#x27;dependency&#x27;);
    return addValRule(cr.dependency, arguments);
  };

  /**
   * Adds an information rule to the current property.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject} - allowed but rarely used
   *      * {@link ReadOnlyChildObject} - allowed but rarely used
   *      * {@link CommandObject}
   *
   * @function ModelComposer#information
   * @param {string} message - The information to display.
   * @param {number} [priority&#x3D;1] - The priority of the rule.
   * @param {boolean} [stopsProcessing&#x3D;false] - Indicates the rule behavior in case of failure.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   * @throws {@link bo.system.ComposerError Composer error}: The current property is undefinable.
   */
  this.information &#x3D; function (/* message, priority, stopsProcessing */) {
    if (isCollection)
      invalid(&#x27;information&#x27;);
    checkCurrentProperty(&#x27;information&#x27;);
    return addValRule(cr.information, arguments);
  };

  function addValRule (ruleFactory, parameters) {
    var args &#x3D; Array.prototype.slice.call(parameters);
    args.unshift(currentProperty);
    rules.add(ruleFactory.apply(null, args));
    return self;
  }

  /**
   * Adds a validation rule to the current property.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject} - allowed but rarely used
   *      * {@link ReadOnlyChildObject} - allowed but rarely used
   *      * {@link CommandObject}
   *
   * @function ModelComposer#validate
   * @param {function} ruleFactory - A factory function that return the
   *    {@link bo.rules.ValidationRule validation rule} to add.
   * @param {*} [&amp;amp;hellip;params] - Optional parameters depending on the validation rule.
   * @param {string} message - Human-readable description of the rule failure.
   * @param {number} [priority] - The priority of the rule.
   * @param {boolean} [stopsProcessing] - Indicates the rule behavior in case of failure.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   * @throws {@link bo.system.ComposerError Composer error}: The current property is undefinable.
   */
  this.validate &#x3D; function (/* ruleFactory, [params], message, priority, stopsProcessing */) {
    if (isCollection)
      invalid(&#x27;validate&#x27;);
    checkCurrentProperty(&#x27;validate&#x27;);
    var args &#x3D; Array.prototype.slice.call(parameters);
    var ruleFactory &#x3D; args.shift();
    args.unshift(currentProperty);
    rules.add(ruleFactory.apply(null, args));
    return this;
  };

  //endregion

  //region Property rules - authorization

  /**
   * Adds an authorization rule to the current property that determines
   * whether the user can read it.
   * See {@link bo.commonRules common rules} to find authorization ones.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject}
   *      * {@link ReadOnlyChildObject}
   *      * {@link CommandObject}
   *
   * @function ModelComposer#canRead
   * @param {function} ruleFactory - A factory function that return the
   *    {@link bo.rules.AuthorizationRule authorization rule} to add.
   * @param {*} [&amp;amp;hellip;params] - Optional parameters depending on the authorization rule.
   * @param {string} message - Human-readable description of the rule failure.
   * @param {number} [priority] - The priority of the rule.
   * @param {boolean} [stopsProcessing] - Indicates the rule behavior in case of failure.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   * @throws {@link bo.system.ComposerError Composer error}: The current property is undefinable.
   */
  this.canRead &#x3D; function (/* ruleFactory, [params], message, priority, stopsProcessing */) {
    if (isCollection)
      invalid(&#x27;canRead&#x27;);
    checkCurrentProperty(&#x27;canRead&#x27;);
    return addAuthRule(Action.readProperty, arguments);
  };

  /**
   * Adds an authorization rule to the current property that determines
   * whether the user can write it.
   * See {@link bo.commonRules common rules} to find authorization ones.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link CommandObject}
   *
   * @function ModelComposer#canWrite
   * @param {function} ruleFactory - A factory function that return the
   *    {@link bo.rules.AuthorizationRule authorization rule} to add.
   * @param {*} [&amp;amp;hellip;params] - Optional parameters depending on the authorization rule.
   * @param {string} message - Human-readable description of the rule failure.
   * @param {number} [priority] - The priority of the rule.
   * @param {boolean} [stopsProcessing] - Indicates the rule behavior in case of failure.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   * @throws {@link bo.system.ComposerError Composer error}: The current property is undefinable.
   */
  this.canWrite &#x3D; function (/* ruleFactory, [params], message, priority, stopsProcessing */) {
    if (isCollection || !isEditable)
      invalid(&#x27;canWrite&#x27;);
    checkCurrentProperty(&#x27;canWrite&#x27;);
    return addAuthRule(Action.writeProperty, arguments);
  };

  function addAuthRule (action, parameters) {
    var args &#x3D; Array.prototype.slice.call(parameters);
    var ruleFactory &#x3D; args.shift();
    args.unshift(action, currentProperty);
    rules.add(ruleFactory.apply(null, args));
    return self;
  }

  //endregion

  //region Object rules

  /**
   * Adds an authorization rule to the business object that determines
   * whether the user can create e new instance of it.
   * See {@link bo.commonRules common rules} to find authorization ones.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableRootCollection}
   *      * {@link EditableChildObject}
   *
   * @function ModelComposer#canCreate
   * @protected
   * @param {function} ruleFactory - A factory function that returns the
   *    {@link bo.rules.AuthorizationRule authorization rule} to add.
   * @param {*} [&amp;amp;hellip;params] - Optional parameters depending on the authorization rule.
   * @param {string} message - Human-readable description of the rule failure.
   * @param {number} [priority] - The priority of the rule.
   * @param {boolean} [stopsProcessing] - Indicates the rule behavior in case of failure.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.canCreate &#x3D; function (/* ruleFactory, [params], message, priority, stopsProcessing */) {
    if (!inGroup1())
      invalid(&#x27;canCreate&#x27;);
    return addObjRule(Action.createObject, arguments);
  };

  /**
   * Adds an authorization rule to the business object that determines
   * whether the user can retrieve instances of it.
   * See {@link bo.commonRules common rules} to find authorization ones.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableRootCollection}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject}
   *      * {@link ReadOnlyRootCollection}
   *      * {@link ReadOnlyChildObject}
   *
   * @function ModelComposer#canFetch
   * @protected
   * @param {function} ruleFactory - A factory function that returns the
   *    {@link bo.rules.AuthorizationRule authorization rule} to add.
   * @param {*} [&amp;amp;hellip;params] - Optional parameters depending on the authorization rule.
   * @param {string} message - Human-readable description of the rule failure.
   * @param {number} [priority] - The priority of the rule.
   * @param {boolean} [stopsProcessing] - Indicates the rule behavior in case of failure.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.canFetch &#x3D; function (/* ruleFactory, [params], message, priority, stopsProcessing */) {
    if (inGroup2())
      invalid(&#x27;canFetch&#x27;);
    return addObjRule(Action.fetchObject, arguments);
  };

  /**
   * Adds an authorization rule to the business object that determines
   * whether the user can update its instances.
   * See {@link bo.commonRules common rules} to find authorization ones.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableRootCollection}
   *      * {@link EditableChildObject}
   *
   * @function ModelComposer#canUpdate
   * @protected
   * @param {function} ruleFactory - A factory function that returns the
   *    {@link bo.rules.AuthorizationRule authorization rule} to add.
   * @param {*} [&amp;amp;hellip;params] - Optional parameters depending on the authorization rule.
   * @param {string} message - Human-readable description of the rule failure.
   * @param {number} [priority] - The priority of the rule.
   * @param {boolean} [stopsProcessing] - Indicates the rule behavior in case of failure.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.canUpdate &#x3D; function (/* ruleFactory, [params], message, priority, stopsProcessing */) {
    if (!inGroup1())
      invalid(&#x27;canUpdate&#x27;);
    return addObjRule(Action.updateObject, arguments);
  };

  /**
   * Adds an authorization rule to the business object that determines
   * whether the user can delete its instances.
   * See {@link bo.commonRules common rules} to find authorization ones.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableRootCollection}
   *      * {@link EditableChildObject}
   *
   * @function ModelComposer#canRemove
   * @protected
   * @param {function} ruleFactory - A factory function that returns the
   *    {@link bo.rules.AuthorizationRule authorization rule} to add.
   * @param {*} [&amp;amp;hellip;params] - Optional parameters depending on the authorization rule.
   * @param {string} message - Human-readable description of the rule failure.
   * @param {number} [priority] - The priority of the rule.
   * @param {boolean} [stopsProcessing] - Indicates the rule behavior in case of failure.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.canRemove &#x3D; function (/* ruleFactory, [params], message, priority, stopsProcessing */) {
    if (!inGroup1())
      invalid(&#x27;canRemove&#x27;);
    return addObjRule(Action.removeObject, arguments);
  };

  /**
   * Adds an authorization rule to the business object that determines
   * whether the user can execute a command.
   * See {@link bo.commonRules common rules} to find authorization ones.
   *
   *    The function is valid for the following model type:
   *
   *      * {@link CommandObject}
   *
   * @function ModelComposer#canExecute
   * @protected
   * @param {function} ruleFactory - A factory function that returns the
   *    {@link bo.rules.AuthorizationRule authorization rule} to add.
   * @param {*} [&amp;amp;hellip;params] - Optional parameters depending on the authorization rule.
   * @param {string} message - Human-readable description of the rule failure.
   * @param {number} [priority] - The priority of the rule.
   * @param {boolean} [stopsProcessing] - Indicates the rule behavior in case of failure.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.canExecute &#x3D; function (/* ruleFactory, [params], message, priority, stopsProcessing */) {
    if (modelFactory !&#x3D;&#x3D; CommandObject)
      invalid(&#x27;canExecute&#x27;);
    return addObjRule(Action.executeCommand, arguments);
  };

  function addObjRule (action, parameters) {
    var args &#x3D; Array.prototype.slice.call(parameters);
    var ruleFactory &#x3D; args.shift();
    args.unshift(action, null);
    rules.add(ruleFactory.apply(null, args));
    return nonProperty();
  }

  /**
   * Adds an authorization rule to the business object that determines
   * whether the user can execute a custom fetch or a custom command.
   * See {@link bo.commonRules common rules} to find authorization ones.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableRootCollection}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject}
   *      * {@link ReadOnlyRootCollection}
   *      * {@link ReadOnlyChildObject}
   *      * {@link CommandObject}
   *
   * @function ModelComposer#canCall
   * @protected
   * @param {string} methodName - The name of the custom method to execute.
   * @param {function} ruleFactory - A factory function that returns the
   *    {@link bo.rules.AuthorizationRule authorization rule} to add.
   * @param {*} [&amp;amp;hellip;params] - Optional parameters depending on the authorization rule.
   * @param {string} message - Human-readable description of the rule failure.
   * @param {number} [priority] - The priority of the rule.
   * @param {boolean} [stopsProcessing] - Indicates the rule behavior in case of failure.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.canCall &#x3D; function (/* methodName, ruleFactory, [params], message, priority, stopsProcessing */) {
    if (isCollection &amp;amp;&amp;amp; !isRoot)
      invalid(&#x27;canCall&#x27;);
    var args &#x3D; Array.prototype.slice.call(arguments);
    var methodName &#x3D; args.shift();
    var ruleFactory &#x3D; args.shift();
    args.unshift(Action.executeMethod, methodName);
    rules.add(ruleFactory.apply(null, args));
    return nonProperty();
  };

  //endregion

  //region Extensions

  /**
   * Adds a custom function to the business object that creates
   * the data access object of the model instance.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableRootCollection}
   *      * {@link EditableChildObject}
   *      * {@link EditableChildCollection}
   *      * {@link ReadOnlyRootObject}
   *      * {@link ReadOnlyRootCollection}
   *      * {@link ReadOnlyChildObject}
   *      * {@link ReadOnlyChildCollection}
   *      * {@link CommandObject}
   *
   * @function ModelComposer#daoBuilder
   * @protected
   * @param {function} daoBuilder - A factory function that returns the
   *    {@link bo.dataAccess.daoBuilder data access object} for the model instance.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.daoBuilder &#x3D; function (daoBuilder) {
    if (!isRoot &amp;amp;&amp;amp; modelFactory !&#x3D;&#x3D; EditableChildObject)
      invalid(&#x27;daoBuilder&#x27;);
    extensions.daoBuilder &#x3D; daoBuilder;
    return nonProperty();
  };

  /**
   * Adds a custom function to the business object that converts
   * the model instance to data transfer object.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableRootCollection}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject}
   *      * {@link ReadOnlyRootCollection}
   *      * {@link CommandObject}
   *
   * @function ModelComposer#toDto
   * @protected
   * @param {function} toDto - A factory function that converts
   *    the model instance to data transfer object.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.toDto &#x3D; function (toDto) {
    if (!isEditable || isCollection)
      invalid(&#x27;toDto&#x27;);
    extensions.toDto &#x3D; toDto;
    return nonProperty();
  };

  /**
   * Adds a custom function to the business object that converts
   * the data transfer object to model instance.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject}
   *      * {@link ReadOnlyChildObject}
   *      * {@link CommandObject}
   *
   * @function ModelComposer#fromDto
   * @protected
   * @param {function} fromDto - A factory function that converts
   *    the data transfer object to model instance.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.fromDto &#x3D; function (fromDto) {
    if (isCollection)
      invalid(&#x27;fromDto&#x27;);
    extensions.fromDto &#x3D; fromDto;
    return nonProperty();
  };

  /**
   * Adds a custom function to the business object that converts
   * the model instance to client transfer object.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableRootCollection}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject}
   *      * {@link ReadOnlyRootCollection}
   *      * {@link ReadOnlyChildObject}
   *
   * @function ModelComposer#toCto
   * @protected
   * @param {function} toCto - A factory function that converts
   *    the model instance to client transfer object.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.toCto &#x3D; function (toCto) {
    if (inGroup2())
      invalid(&#x27;toCto&#x27;);
    extensions.toCto &#x3D; toCto;
    return nonProperty();
  };

  /**
   * Adds a custom function to the business object that converts
   * the client transfer object to model instance.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableRootCollection}
   *      * {@link EditableChildObject}
   *
   * @function ModelComposer#fromCto
   * @protected
   * @param {function} fromCto - A factory function that converts
   *    the client transfer object to model instance.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.fromCto &#x3D; function (fromCto) {
    if (!inGroup1())
      invalid(&#x27;fromCto&#x27;);
    extensions.fromCto &#x3D; fromCto;
    return nonProperty();
  };

  /**
   * Adds a custom function to the business object that returns
   * the property values of a new instance from the data source.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *
   * @function ModelComposer#dataCreate
   * @protected
   * @param {function} dataCreate - A factory function that returns
   *    the property values of a new instance from the data source.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.dataCreate &#x3D; function (dataCreate) {
    if (!inGroup3())
      invalid(&#x27;dataCreate&#x27;);
    extensions.dataCreate &#x3D; dataCreate;
    return nonProperty();
  };

  /**
   * Adds a custom function to the business object that returns
   * the property values of an existing instance from the data source.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableRootCollection}
   *      * {@link EditableChildObject}
   *      * {@link ReadOnlyRootObject}
   *      * {@link ReadOnlyRootCollection}
   *      * {@link ReadOnlyChildObject}
   *
   * @function ModelComposer#dataFetch
   * @protected
   * @param {function} dataFetch - A factory function that returns
   *    the property values of an existing instance from the data source.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.dataFetch &#x3D; function (dataFetch) {
    if (inGroup2())
      invalid(&#x27;dataFetch&#x27;);
    extensions.dataFetch &#x3D; dataFetch;
    return nonProperty();
  };

  /**
   * Adds a custom function to the business object that saves
   * a new instance into the data source.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *
   * @function ModelComposer#dataInsert
   * @protected
   * @param {function} dataInsert - A factory function that saves
   *    a new instance into the data source.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.dataInsert &#x3D; function (dataInsert) {
    if (!inGroup3())
      invalid(&#x27;dataInsert&#x27;);
    extensions.dataInsert &#x3D; dataInsert;
    return nonProperty();
  };

  /**
   * Adds a custom function to the business object that saves
   * an existing instance into the data source.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *
   * @function ModelComposer#dataUpdate
   * @protected
   * @param {function} dataUpdate - A factory function that saves
   *    an existing instance into the data source.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.dataUpdate &#x3D; function (dataUpdate) {
    if (!inGroup3())
      invalid(&#x27;dataUpdate&#x27;);
    extensions.dataUpdate &#x3D; dataUpdate;
    return nonProperty();
  };

  /**
   * Adds a custom function to the business object that deletes
   * an existing instance from the data source.
   *
   *    The function is valid for the following model types:
   *
   *      * {@link EditableRootObject}
   *      * {@link EditableChildObject}
   *
   * @function ModelComposer#dataRemove
   * @protected
   * @param {function} dataRemove - A factory function that deletes
   *    an existing instance from the data source.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.dataRemove &#x3D; function (dataRemove) {
    if (!inGroup3())
      invalid(&#x27;dataRemove&#x27;);
    extensions.dataRemove &#x3D; dataRemove;
    return nonProperty();
  };

  /**
   * Adds a custom function to the business object that executes
   * a command on the data source.
   *
   *    The function is valid for the following model type:
   *
   *      * {@link CommandObject}
   *
   * @function ModelComposer#dataExecute
   * @protected
   * @param {function} dataExecute - A factory function that executes
   *    a command on the data source.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.dataExecute &#x3D; function (dataExecute) {
    if (modelFactory !&#x3D;&#x3D; CommandObject)
      invalid(&#x27;dataExecute&#x27;);
    extensions.dataExecute &#x3D; dataExecute;
    return nonProperty();
  };

  /**
   * Adds a new instance method to the business object that
   * will call a custom execute method on a command object instance.
   * See {@link bo.shared.ExtensionManagerBase#addOtherMethod addOtherMethod}
   * method of ExtensionManagerBase class.
   *
   *    The function is valid for the following model type:
   *
   *      * {@link CommandObject}
   *
   * @function ModelComposer#addMethod
   * @protected
   * @param {string} methodName - The name of the method on the data access object to be called.
   * @returns {ModelComposer}
   *
   * @throws {@link bo.system.ComposerError Composer error}: The function is not applicable to the model type.
   */
  this.addMethod &#x3D; function (methodName) {
    if (modelFactory !&#x3D;&#x3D; CommandObject)
      invalid(&#x27;addMethod&#x27;);
    extensions.addOtherMethod(methodName);
    return nonProperty();
  };

  //endregion

  //region Helper

  function nonProperty () {
    currentProperty &#x3D; null;
    return self;
  }

  function inGroup1() {
    return [EditableRootObject, EditableChildObject, EditableRootCollection].some(function (element) {
      return element &#x3D;&#x3D;&#x3D; modelFactory;
    });
  }

  function inGroup2() {
    return isCollection &amp;amp;&amp;amp; !isRoot || modelFactory &#x3D;&#x3D;&#x3D; CommandObject;
  }

  function inGroup3() {
    return modelFactory &#x3D;&#x3D;&#x3D; EditableRootObject || modelFactory &#x3D;&#x3D;&#x3D; EditableChildObject;
  }

  function checkCurrentProperty(methodName) {
    if (!currentProperty) {
      var error &#x3D; new ComposerError(&#x27;property&#x27;, modelName, methodName);
      error.model &#x3D; modelName;
      error.modelType &#x3D; modelTypeName;
      error.method &#x3D; methodName;
      throw error;
    }
  }

  function invalid(methodName) {
    var error &#x3D; new ComposerError(&#x27;invalid&#x27;, modelName, methodName, modelTypeName);
    error.model &#x3D; modelName;
    error.modelType &#x3D; modelTypeName;
    error.method &#x3D; methodName;
    throw error;
  }

  //endregion

  this.compose &#x3D; function () {
    switch (argsType) {
      case ArgsType.businessObject:
        return new modelFactory(modelName, properties, rules, extensions);
      case ArgsType.rootCollection:
        return new modelFactory(modelName, memberType, rules, extensions);
      case ArgsType.childCollection:
        return new modelFactory(modelName, memberType);
    }
  };
}

module.exports &#x3D; ModelComposerFactory;
</code></pre>
          </article>
        </div>
      </div>
      <nav id="jsdoc-toc-nav" role="navigation"></nav>
    </div>
  </div>
  <footer id="jsdoc-footer" class="jsdoc-footer">
    <div id="jsdoc-footer-container">
      <p>
        Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc</a> 3.4.0 on April 7, 2016.
      </p>
    </div>
  </footer>
  <script src="scripts/jquery.min.js"></script>
  <script src="scripts/jquery.cookie.js"></script>
  <script src="scripts/tree.jquery.js"></script>
  <script src="scripts/prettify.js"></script>
  <script src="scripts/jsdoc-toc.js"></script>
  <script src="scripts/linenumber.js"></script>
  <script src="scripts/scrollanchor.js"></script>
</body>

</html>